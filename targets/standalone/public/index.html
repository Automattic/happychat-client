<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Happychat Embedded</title>
  <style>
  body {
    margin-left: 12%;
    margin-right: 12%;
  }
  </style>
</head>
<body>
  <div id="support"></div>
  <script type="text/javascript" src="./happychat.js" charset="utf-8"></script>
  <script type="text/javascript">
		Happychat.open( {
			nodeId: 'support',
			entryOptions: {
				primaryOptions: [
					{ 'value': 'before-buy', 'label': 'Before you buy', secondaryOptions: [
						{ 'value': 'themes', 'label': 'Themes', canChat: false },
						{ 'value': 'extensions', 'label': 'Extensions' },
					] },
					{ 'value': 'account', 'label': 'Help with my account', secondaryOptions: [] },
					{ 'value': 'broken', 'label': 'Something is broken', canChat: false },
				],
				secondaryOptions: [
					{ 'value': 'config', 'label': 'Help configuring', canChat: false },
					{ 'value': 'order', 'label': 'Help with an order' },
				],
				fallbackTicket: {
					headers: {
						'X-Test-Header': 'test header',
						'X-Test-Header-2': 'test 2'
					},
					pathToCreate: '/create-ticket',
					pathToShow: '/show-ticket/<ticket-id>',
				}
			}
		} );

		// test events API
		var reportChatStatus= function(chatStatus){
			console.log('chatStatus is ', chatStatus);
		}
		Happychat.on('chatStatus', reportChatStatus);
		var reportAvailability = function(availability){
			console.log('availibility is ', availability);
		}
		Happychat.on('availability', reportAvailability);
		window.unload = function() {
			console.log('unload');
			Happychat.of('availability', reportAvailability);
			Happychat.of('chatStatus', reportChatStatus);
		}
</script>
</body>
</html>
